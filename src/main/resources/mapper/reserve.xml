<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.film.mapper.ReserveMapper">

		
	<insert id="reserveinsert" parameterType="com.film.dto.KakaopayDTO">
    	<selectKey keyProperty="rev_no" resultType="int" order="AFTER">
       		SELECT LAST_INSERT_ID() 
    	</selectKey>
    	insert into filmbox_rev ( movieCd, rsv_date, price, rev_condition) 
    	values ( #{movieCd},now(), #{payMoney} ,0)
    </insert>
    <!-- <insert id="screeninsert" parameterType="com.film.dto.KakaopayDTO">
    	
    	insert into filmbox_screen (rev_no,show_date, show_time, seatno) 
    	
    	values (#{rev_no},#{reserveDate}, #{screenTime},#{selectedSeat})
    </insert> -->
    
    <insert id="screeninsert" parameterType="java.util.List">
		insert into filmbox_screen (rev_no,show_date, show_time, seatno) 
		values
		<foreach item="item" index="index" collection="list"
			separator=" , ">
			(#{rev_no},#{reserveDate}, #{screenTime},#{selectedSeat})
		</foreach>
	</insert>
    
</mapper>
    
    